<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>良博贺新年</title>
    <link rel="stylesheet" href="css/screen.css">
    <script src="js/jquery-3.5.1.min.js"></script>
</head>

<body>
    <ul>
        <!-- <li>
            <div class="pic"> <img src="image/s_1.png" alt=""></div>
            <div class="content">
                <p class="nickname">微信网友：123</p>
                <p class="blessing">祝您在新的一年天天开心</p>
            </div>

        </li>
        <li>
            <div class="pic"> <img src="image/s_1.png" alt=""></div>
            <div class="content">
                <p class="nickname">微信网友：123</p>
                <p class="blessing">祝您在新的一年天天开心</p>
            </div>

        </li>
        <li>
            <div class="pic"> <img src="image/s_1.png" alt=""></div>
            <div class="content">
                <p class="nickname">微信网友：123</p>
                <p class="blessing">祝您在新的一年天天开心</p>
            </div>

        </li> -->

    </ul>
</body>
<script>
    $(function() {
        console.log(1);
        var i = 0;
        var j = 0;
        var timer = 'null';
        var picid = "null";
        var picSrc = "null";
        var newdata = 'null';

        function post() {
            $.post("https://wx.weibenh5.com/2020/Dec/yearCard/api/down.php?a=cardinfo", {
                    // a: cardinfo,
                },
                function(data, status) {
                    // console.log(data, status);
                    // console.log(data.data[0].content);
                    // console.log(data.data[i + 1].nickname);
                    // console.log("i+1", i + 1);
                    newdata = data;
                    picSrc = 'image/s_' +
                        parseInt(newdata.data[i].title / 10) +
                        '.png';
                    // console.log('里面', newdata);

                }

            )
        }
        post();
        setTimeout(function() {
            console.log('外面2s', picSrc)
        }, 1000);

        function getdetails() {
            $('ul').append("<li id=" + i +
                "><div class='pic'><img src='image/s_" +
                parseInt(newdata.data[i].title / 10) +
                ".png'></div><div class='content'><p class='nickname'>微信网友：" +
                newdata.data[i].nickname +
                "</p><p class='blessing'>" +
                newdata.data[i].content +
                "</p></div></li>");
            // $('ul').append("<li><div class='pic'><img src='" +
            //     picSrc+
            //     "'></div></li>");
            i += 1;
            console.log(i);
        };
        setTimeout(getdetails, 2000);
        setTimeout(getdetails, 2000);
        setTimeout(getdetails, 2000);

        // console.log(newdata.data.length);
        setTimeout(setInterval(function Interval() {

            if (i >= 3) {
                $('ul').hide();
                $('li').eq(j - 3).remove();
                console.log('aa', i - 3);
            }
            if (i >= newdata.data.length) {
                i = 0;
                $('ul').children('li').remove();
                post();
                // $('ul').children('li').remove();
                setTimeout(getdetails, 2000);
                setTimeout(getdetails, 2000);
                setTimeout(getdetails, 2000);
                // setTimeout(getdetails, 2000);
                // setTimeout(getdetails, 2000);
                // setTimeout(getdetails, 2000);
            }
            setTimeout(getdetails, 2000);
            $('ul').fadeIn(7000)
        }, 10000), 2000);
        //     }
        // )
    })
</script>


</html>