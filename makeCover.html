<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>正面制作</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/makeCover.css">
    <script src="js/jquery-3.5.1.min.js"></script>
    <!-- <script src='js/jquery.mobile-1.4.5.min.js'></script>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css"> -->

    <script>
        $(function() {
            var flag;
            var srcOn = 11;
            var index = 0;
            var map = new Map();
            map.set("lj", 11);
            map.set("word", "light_1");
            // 文字
            var wordsrc = $('.show li').eq(index).children('.word').attr('src').split('.')[0].split('_')[0];
            var wordid = $('.show li').eq(index).children('.word').attr('src').split('.')[0].split('_')[1];
            $('.choose li').click(function() {
                $(this).animate({
                    width: '25%',
                    opacity: 1
                });
                index = $(this).index();
                // 展示
                $('.show li').eq(index).fadeIn(1000).siblings('li').hide();
                srcOn = $('.show li').eq(index).children('img').attr("src").split('.')[0].split('_')[1];
                //console.log(srcOn);
                // 选择
                $(this).siblings().animate({
                    width: '13%',
                    opacity: 0.5
                });

                // 文字
                wordsrc = $('.show li').eq(index).children('.word').attr('src').split('.')[0].split('_')[0];
                wordid = $('.show li').eq(index).children('.word').attr('src').split('.')[0].split('_')[1];
                // console.log($(this).children('.word').attr("id"));
                map.set("lj", srcOn);
                map.set("word", wordsrc + "_" + wordid + '.png');
            });



            // 向左
            $('.left').click(function() {
                srcOn--;
                console.log('left', srcOn);
                if (srcOn % 10 == 0) {
                    srcOn += 8;
                };
                if (parseInt(srcOn / 10) == 1 || parseInt(srcOn / 10) == 6) {
                    flag = 'image/light.png';
                    // console.log(flag);
                } else {
                    flag = 'image/dark.png';
                    // console.log(parseInt(srcOn / 10));
                }

                var srcNew = 'image/a_' + srcOn + '.png';
                console.log('srcNew', srcNew);

                $('.show li').eq(index).children('.relic').attr("src", srcNew).fadeIn(1000).siblings('.shade').attr("src", flag)
                map.set("lj", srcOn);
            });
            // 向右
            $('.right').click(function() {
                srcOn++;
                if (srcOn % 10 == 9) {
                    srcOn -= 8;
                };
                if (parseInt(srcOn / 10) == 1 || parseInt(srcOn / 10) == 6) {
                    flag = 'image/light.png';
                } else {
                    flag = 'image/dark.png';
                }
                var srcNew = 'image/a_' + srcOn + '.png';
                $('.show li').eq(index).children('.relic').attr("src", srcNew).siblings('.shade').attr("src", flag);
                map.set("lj", srcOn);
            });


            // $('.show li').eq(index).children('.word').click(function() {
            $('.word').click(function() {
                $(this).fadeOut(10)
                wordid++;
                if (wordid == 10) {
                    wordid = 0
                }
                newWord = wordsrc + "_" + wordid + '.png';
                console.log(newWord);
                $(this).attr("src", newWord).fadeIn(1000);
                map.set("word", newWord);
            });

            $('.btn').click(function() {
                var path = "makeReverse.html"
                path = path + "?lj=" + map.get("lj") + "&word=" + map.get("word")
                window.location.href = path

            });
        })
    </script>
</head>

<body>
    <p>点击文字更换祝福</p>
    <div class="show">
        <ul>
            <div class="left">&lt</div>
            <div class="right">&gt</div>
            <li class="current">
                <img src="image/a_11.png" alt="" class="relic">
                <img src="image/light.png" alt="" class="shade">
                <img src="image/light_1.png" alt="" class="word" id="1">
            </li>
            <li>
                <img src="image/a_21.png" alt="" class="relic">
                <img src="image/dark.png" alt="" class="shade">
                <img src="image/dark_1.png" alt="" class="word" id="2">


            </li>
            <li>
                <img src="image/a_31.png" alt="" class="relic">
                <img src="image/dark.png" alt="" class="shade">
                <img src="image/dark_1.png" alt="" class="word" id="3">

            </li>
            <li>
                <img src="image/a_41.png" alt="" class="relic">
                <img src="image/dark.png" alt="" class="shade">
                <img src="image/dark_1.png" alt="" class="word" id="4">

            </li>
            <li>
                <img src="image/a_51.png" alt="" class="relic">
                <img src="image/dark.png" alt="" class="shade">
                <img src="image/dark_1.png" alt="" class="word" id="5">

            </li>
            <li>
                <img src="image/a_61.png" alt="" class="relic">
                <img src="image/light.png" alt="" class="shade">
                <img src="image/light_1.png" alt="" class="word" id="6">

            </li>
        </ul>
    </div>
    <p>请点击文物选择贺卡主题</p>

    <div class="choose">
        <ul>
            <li class="on"><img src="image/xa_1.png" alt=""></li>
            <li><img src="image/xa_2.png" alt=""></li>
            <li><img src="image/xa_3.png" alt=""></li>
            <li><img src="image/xa_4.png" alt=""></li>
            <li><img src="image/xa_5.png" alt=""></li>
            <li><img src="image/xa_6.png" alt=""> </li>
        </ul>
    </div>


    <div class="btn"><img src="image/next.png"></div>



</body>
<!-- <script>
    $(function() {
        $("p").on("swipeleft", function() {
            alert("向左滑动!");
        });
    })
</script> -->

</html>